workflows:
  build-app:
    name: Build Viby App
    max_build_duration: 60
    environment:
      groups:
        - expo-secrets  # Contains EXPO_TOKEN
      node: 18.16.0
    scripts:
      - echo "ðŸ”§ Installing CLI tools"
      - npm install -g expo-cli eas-cli
      - echo "ðŸ“¦ Installing project dependencies"
      - npm install
      - echo "ðŸš€ Running EAS Build"
      - eas build --platform android --profile production --non-interactive
    artifacts:
      - '**/*.apk'
    publishing:
      email:
        recipients:
          - moataz.elhaddad@gmail.com
        notify:
          success: true
          failure: true
